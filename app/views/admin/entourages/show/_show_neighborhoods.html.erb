<h4>Liste des groupes de voisins <span class="badge"><%= @neighborhoods.count %><span></h4>

<table id="neighborhoods-list" class="table table-striped">
  <% if @neighborhoods.any? %>
    <thead>
      <tr>
        <th>id</th>
        <th>nom</th>
        <th>code postal</th>
        <th>créé le</th>
        <th>administrateur</th>
        <th>membres</th>
      </tr>
    </thead>

    <tbody>
      <% @neighborhoods.each do |neighborhood| %>
        <tr>
          <td><%= link_to neighborhood.id, admin_neighborhood_path(neighborhood) %></td>
          <td><%= link_to neighborhood.name, admin_neighborhood_path(neighborhood) %></td>
          <td><%= neighborhood.postal_code %></td>
          <td><%= l neighborhood.created_at %></td>
          <td><%= link_to neighborhood.user.full_name, admin_user_path(neighborhood.user) %></td>
          <td><%= neighborhood.members_count %></td>
        </tr>
      <% end %>
    </tbody>
  <% else %>
    <caption><%= "Il n'y a pas encore de groupes associés à cet événement."%></caption>
  <% end %>
</table>

<h4>Changer les groupes de voisins</h4>

<div style="margin-bottom: 15px; display: flex">
  <div class="btn-group btn-group-sm">
    <%#= link_to("Tous", @params.merge(area: :all), class: "btn btn-#{@area == :all ? :primary : :default}") %>
    <% ModerationArea.by_slug_without_no_zone.sort.each do |slug, area| %>
      <%= link_to(area.short_name, @params.merge(area: slug), class: "btn btn-#{@area == slug ? :primary : :default}") %>
    <% end %>
  </div>
</div>

<% neighborhoods_for_area = Neighborhood.with_moderation_area(@area.to_s).includes([:user]).order(:postal_code, :name) %>

<table id="neighborhoods-for-area-list" class="table table-striped">
  <% if neighborhoods_for_area.any? %>
    <thead>
      <tr>
        <th>id</th>
        <th>nom</th>
        <th>code postal</th>
        <th>créé le</th>
        <th>administrateur</th>
        <th>membres</th>
      </tr>
    </thead>

    <tbody>
      <% neighborhoods_for_area.each do |neighborhood| %>
        <tr>
          <td><%= link_to neighborhood.id, admin_neighborhood_path(neighborhood) %></td>
          <td><%= link_to neighborhood.name, admin_neighborhood_path(neighborhood) %></td>
          <td><%= neighborhood.postal_code %></td>
          <td><%= l neighborhood.created_at %></td>
          <td><%= link_to neighborhood.user.full_name, admin_user_path(neighborhood.user) %></td>
          <td><%= neighborhood.members_count %></td>
        </tr>
      <% end %>
    </tbody>
  <% else %>
    <caption><%= "Il n'y a pas encore de groupe associable à cette zone de modération."%></caption>
  <% end %>
</table>
