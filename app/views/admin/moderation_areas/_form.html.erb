<style>
  .field_with_errors { display: inline-block }
</style>

<%= render partial: 'common/errors', locals: {obj: @area} %>

<%= form_for [:admin, @area], html: { role: "form" } do |f| %>
  <div class="form-group">
    <%= f.label :departement %>

    <% if @area.departement == '*' %>
      <div class="alert alert-info" role="alert" style="display: flex; align-items: center">
        <div style="flex-grow: 1">
          <b>Hors-Zone</b><br>
          Le département n'est pas éditable pour la zone de modération Hors-Zone.
        </div>
      </div>
    <% else %>
      <%= f.text_field :departement, class: "form-control", required: true %>
    <% end %>
  </div>

  <div class="form-group">
    <%= f.label :name %>
    <%= f.text_field :name, class: "form-control", required: true %>
  </div>

  <div class="form-group">
    <%= f.label :moderator_id %>

    <% unless @area.new_record? %>
      <div>
        <%= link_to UserPresenter.full_name(@area.moderator), [:admin, @area.moderator] %>
      </div>

      <% unless @area.moderator.moderator? %>
        <i>Attention, le modérateur choisi n'a pas les autorisations d'un modérateur. Merci d'en préciser un nouveau</i>
      <% end %>
    <% end %>

    <%= f.select :moderator_id, options_for_select(moderators_for_select, @area.moderator_id), { include_blank: false }, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= f.label :slack_moderator_id %>
    <span class="glyphicon glyphicon-question-sign" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="
      Vous pouvez trouver l'identifiant Slack sur le profil Slack de l'utilisateur, bouton '...' (Plus), Copier l'ID de membre
    "></span>

    <%= f.text_field :slack_moderator_id, class: "form-control", maxlength: 11 %>
  </div>

  <div>
    <!-- Nav tabs -->
    <ul class="nav nav-tabs" style="margin-bottom: 15px">
      <li role="presentation" class="active"><a href="#offer_help" data-toggle="tab"><%= t 'community.entourage.goals_compact.offer_help' %></a></li>
      <li role="presentation"><a href="#ask_for_help" data-toggle="tab"><%= t 'community.entourage.goals_compact.ask_for_help' %></a></li>
      <li role="presentation"><a href="#organization" data-toggle="tab"><%= t 'community.entourage.goals_compact.organization' %></a></li>
      <li role="presentation"><a href="#goal_not_known" data-toggle="tab"><%= t 'community.entourage.goals_compact.goal_not_known' %></a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
      <div class="tab-pane active" id="offer_help">
        <div class="form-group">
          <%= f.label :welcome_message_1_offer_help do %>
            <%= t 'activerecord.attributes.moderation_area.welcome_message_1' %>
            pour le profil <%= t 'community.entourage.goals_compact.offer_help' %>
          <% end %>
          <%= f.text_area :welcome_message_1_offer_help, rows: 10, class: "form-control" %>
          Utilisez <code>{{first_name}}</code> pour insérer le prénom du destinataire.
        </div>
        <div class="form-group">
          <%= f.label :welcome_message_2_offer_help do %>
            <%= t 'activerecord.attributes.moderation_area.welcome_message_2' %>
            pour le profil <%= t 'community.entourage.goals_compact.offer_help' %>
          <% end %>
          <%= f.text_area :welcome_message_2_offer_help, rows: 10, class: "form-control" %>
        </div>
      </div>

      <div class="tab-pane" id="ask_for_help">
        <div class="form-group">
          <%= f.label :welcome_message_1_ask_for_help do %>
            <%= t 'activerecord.attributes.moderation_area.welcome_message_1' %>
            si <%= t 'community.entourage.goals_compact.ask_for_help' %>
          <% end %>
          <%= f.text_area :welcome_message_1_ask_for_help, rows: 10, class: "form-control" %>
          Utilisez <code>{{first_name}}</code> pour insérer le prénom du destinataire.
        </div>
        <div class="form-group">
          <%= f.label :welcome_message_2_ask_for_help do %>
            <%= t 'activerecord.attributes.moderation_area.welcome_message_2' %>
            pour le profil <%= t 'community.entourage.goals_compact.ask_for_help' %>
          <% end %>
          <%= f.text_area :welcome_message_2_ask_for_help, rows: 10, class: "form-control" %>
        </div>
      </div>

      <div class="tab-pane" id="organization">
        <div class="form-group">
          <%= f.label :welcome_message_1_organization do %>
            <%= t 'activerecord.attributes.moderation_area.welcome_message_1' %>
            pour le profil <%= t 'community.entourage.goals_compact.organization' %>
          <% end %>
          <%= f.text_area :welcome_message_1_organization, rows: 10, class: "form-control" %>
          Utilisez <code>{{first_name}}</code> pour insérer le prénom du destinataire.
        </div>
        <div class="form-group">
          <%= f.label :welcome_message_2_organization do %>
            <%= t 'activerecord.attributes.moderation_area.welcome_message_2' %>
            pour le profil <%= t 'community.entourage.goals_compact.organization' %>
          <% end %>
          <%= f.text_area :welcome_message_2_organization, rows: 10, class: "form-control" %>
        </div>
      </div>

      <div class="tab-pane" id="goal_not_known">
        <div class="form-group">
          <%= f.label :welcome_message_1_goal_not_known do %>
            <%= t 'activerecord.attributes.moderation_area.welcome_message_1' %>
            pour le profil <%= t 'community.entourage.goals_compact.goal_not_known' %>
          <% end %>
          <%= f.text_area :welcome_message_1_goal_not_known, rows: 10, class: "form-control" %>
          Utilisez <code>{{first_name}}</code> pour insérer le prénom du destinataire.
        </div>
        <div class="form-group">
          <%= f.label :welcome_message_2_goal_not_known do %>
            <%= t 'activerecord.attributes.moderation_area.welcome_message_2' %>
            pour le profil <%= t 'community.entourage.goals_compact.goal_not_known' %>
          <% end %>
          <%= f.text_area :welcome_message_2_goal_not_known, rows: 10, class: "form-control" %>
        </div>
      </div>
    </div>
  </div>

  <div class="text-right">
    <%= f.submit "Enregistrer", class: "btn btn-success" %>
  </div>
<% end %>
